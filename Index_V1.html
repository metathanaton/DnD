<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Fiche de personnage JDR</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    td, th { border: 1px solid #aaa; padding: 6px; text-align: center; }
    input { width: 60px; text-align: center; }
  </style>
</head>
<body>

  <h1>Fiche de Personnage</h1>

  <label>Niveau : <input type="number" id="niveau" value="5" /></label>
  <label style="margin-left: 20px;">Points de caract√©ristiques : <input type="number" id="pts_carac" value="0" /></label>

  <h2>Caract√©ristiques</h2>
  <table>
    <tr>
      <th>Nom</th><th>Valeur</th>
    </tr>
    <tr><td>Force</td><td><input type="number" id="force" value="5" /></td></tr>
    <tr><td>Constitution</td><td><input type="number" id="constitution" value="9" /></td></tr>
    <tr><td>Dext√©rit√©</td><td><input type="number" id="dexterite" value="15" /></td></tr>
    <tr><td>Sagesse</td><td><input type="number" id="sagesse" value="5" /></td></tr>
    <tr><td>Intelligence</td><td><input type="number" id="intelligence" value="10" /></td></tr>
    <tr><td>Charisme</td><td><input type="number" id="charisme" value="14" /></td></tr>
  </table>

  <h2>Comp√©tences (Dext√©rit√©)</h2>
  <table>
    <tr><th>Comp√©tence</th><th>Base</th><th>Total</th></tr>
    <tr>
      <td>Acrobaties</td>
      <td><input type="number" id="acrobaties_base" value="10" /></td>
      <td><span id="acrobaties_total">0</span></td>
    </tr>
    <tr>
      <td>Discr√©tion</td>
      <td><input type="number" id="discretion_base" value="12" /></td>
      <td><span id="discretion_total">0</span></td>
    </tr>
    <tr>
      <td>Escamotage</td>
      <td><input type="number" id="escamotage_base" value="0" /></td>
      <td><span id="escamotage_total">0</span></td>
    </tr>
  </table>

  <button onclick="sauvegarder()">üíæ Sauvegarder</button>
  <button onclick="charger()">üìÇ Charger</button>

  <script>
    function calculerTotal(idBase, idCarac, idTotal) {
      const base = parseInt(document.getElementById(idBase).value) || 0;
      const carac = parseInt(document.getElementById(idCarac).value) || 0;
      document.getElementById(idTotal).textContent = base + Math.floor((carac - 10) / 2);
    }

    function majComp() {
      calculerTotal('acrobaties_base', 'dexterite', 'acrobaties_total');
      calculerTotal('discretion_base', 'dexterite', 'discretion_total');
      calculerTotal('escamotage_base', 'dexterite', 'escamotage_total');
    }

    function sauvegarder() {
      const data = {
        niveau: document.getElementById('niveau').value,
        force: document.getElementById('force').value,
        dexterite: document.getElementById('dexterite').value,
        acrobaties: document.getElementById('acrobaties_base').value,
        // etc. √† compl√©ter
      };
      localStorage.setItem('ficheJDR', JSON.stringify(data));
      alert("Fiche sauvegard√©e !");
    }

    function charger() {
      const data = JSON.parse(localStorage.getItem('ficheJDR'));
      if (!data) return alert("Aucune fiche sauvegard√©e.");
      document.getElementById('niveau').value = data.niveau;
      document.getElementById('force').value = data.force;
      document.getElementById('dexterite').value = data.dexterite;
      document.getElementById('acrobaties_base').value = data.acrobaties;
      majComp();
    }

    // Auto-calcul quand on change une valeur
    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', majComp);
    });

    majComp(); // initialisation
  </script>
</body>
</html>
